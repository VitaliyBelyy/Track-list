$(document).ready(function(){var n,c,s=10;function o(){var i=$(".track-list"),a=n.slice(c,c+s);$.each(a,function(a,s){var e=parseInt(s.trackTimeMillis/6e4)+":"+parseInt(s.trackTimeMillis/1e3%60),t='<li>        <div class="preview-wrapper clearfix">          <div class="thumbnail">            <img src="'+s.artworkUrl100+'" alt="track-thumbnail">          </div>          <div class="col-3">            <span class="artist">'+s.artistName+'</span>          </div>          <div class="col-3">            <span class="track">'+s.trackName+'</span>          </div>          <div class="col-3">            <span class="collection">'+s.collectionName+'</span>          </div>          <div class="col-3">            <span class="genre">'+s.primaryGenreName+'</span>          </div>          <div id="expand">            <span></span>            <span></span>          </div>        </div>        <div class="full-info-wrapper clearfix">          <div class="track-name">            <h2>'+s.artistName+" - "+s.trackName+'<span class="note-icon"></span></h2>          </div>          <div class="col-6">            <ul>              <li><span>Collection:</span>'+s.collectionName+"</li>              <li><span>Track Count:</span>"+s.trackCount+"</li>              <li><span>Price:</span>"+s.collectionPrice+' USD</li>            </ul>          </div>          <div class="col-6">            <ul>              <li><span>Track duration:</span>'+e+" min</li>              <li><span>Track price:</span>"+s.trackPrice+" USD</li>            </ul>          </div>        </div>      </li>";i.append(t)}),n.slice(c).length<=10?$(".show-more").hide():c+=s}$(document).on("click",".search-icon, .close",function(a){var s=$(this),e=s.closest(".search-wrapper");e.hasClass("active")?e.hasClass("active")&&0==s.closest(".input-holder").length&&(e.removeClass("active"),e.find(".search-input").val(""),$("#hint").hide().html($("<span/>",{text:"Click on the button above and start the search."})).fadeIn(300)):(e.addClass("active"),$("#hint").fadeOut(300),a.preventDefault())}),$(document).on("submit",".search-form",function(a){var s,e=$(this).find(".search-input").val().trim();if(""==e)$("#hint").html($("<span/>",{text:"Fill in the field."})).fadeIn(300);else if($("#hint").hide(),s="https://itunes.apple.com/search?term="+encodeURIComponent(e)+"&media=music&entity=song&attribute=artistTerm&limit=200",$.ajax({url:s,dataType:"json",async:!1,success:function(a){n=a.results.sort(function(a,s){return a.artistName>s.artistName?1:a.artistName<s.artistName?-1:void 0})}}),0<n.length){c=0;var t=$("<div/>",{class:"list-heading clearfix"});$.each(["Artist","Track","Collection","Genre"],function(a,s){t.append($("<div/>",{class:"col-3"}).append($("<span/>",{text:s})))});var i=$("<ul/>",{class:"track-list"}),l=$("<button/>",{class:"show-more",text:"Show more..."});$(".list-wrapper").html("").append(t).append(i).append(l),o()}else $("#hint").html($("<span/>",{text:"Sorry, no matches for your query."})).fadeIn(300);a.preventDefault()}),$(document).on("click",".show-more",o),$(document).on("click","#expand",function(){var a=$(this).closest("li"),s=$(".full-info-wrapper");$("#expand.open").not($(this)).removeClass("open"),s.not(a.find(s)).slideUp(),$(this).toggleClass("open"),a.find(s).slideToggle()});var a=0,e=0,t=0;$(window).scroll(function(){$(this).scrollTop();t=e,e=$(this).scrollTop(),t<e&&200<e?($("#scroll").addClass("top"),$("#scroll").removeClass("down")):e<200&&$("#scroll").removeClass("top")}),$(document).on("click","#scroll.top",function(){$(this).addClass("down"),a=e,$("html, body").animate({scrollTop:0},800)}),$(document).on("click","#scroll.down",function(){$("html, body").animate({scrollTop:a},800,function(){$("#scroll").removeClass("down")})})});